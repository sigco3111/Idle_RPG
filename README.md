# 방치형 모험가 노트

"방치형 모험가 노트"는 플레이어가 파티를 구성하고 관리하며 자동으로 전투를 진행하는 방치형 RPG 게임입니다. D&D (Dungeons & Dragons) 스타일의 주사위 기반 전투 시스템, 다양한 장비 획득 및 장착, 그리고 끝없는 도전을 제공하는 다회차(New Game Plus) 요소가 특징입니다.

## 📋 목차

- [주요 기능](#주요-기능)
- [기술 스택](#기술-스택)
- [설치 및 실행](#설치-및-실행)
- [프로젝트 구조](#프로젝트-구조)
- [플레이 방법](#플레이-방법)
- [개발 가이드](#개발-가이드)
- [환경 설정](#환경-설정)
- [기여하기](#기여하기)

## 🎮 주요 기능

### 파티 시스템
- 용사, 명궁, 현자의 세 가지 클래스로 구성된 파티를 운영합니다.
- 각 파티원은 고유한 능력치와 역할, 장비 제한을 가집니다.
- 스테이지 진행에 따라 새로운 동료를 영입할 수 있습니다.

### D&D 스타일 전투
- 모든 공격은 d20 (20면체 주사위) 굴림으로 명중 여부가 결정됩니다.
- 캐릭터와 적은 각자의 방어 등급(AC, Armor Class)을 가집니다.
- 명중 시 무기별 피해 주사위(예: 1d8, 2d6)를 굴려 피해량을 결정합니다.
- d20 굴림에서 자연스러운 20은 치명타(추가 피해), 1은 자동 빗나감을 의미합니다.
- 전투 과정과 주사위 굴림 결과는 애니메이션으로 표시됩니다.

### 장비 시스템
- 무기, 갑옷, 방패, 장신구 슬롯에 다양한 장비를 장착할 수 있습니다.
- 장비는 일반(Common), 고급(Uncommon), 희귀(Rare), 영웅(Epic) 등급으로 나뉩니다.
- 장비는 공격력, 방어 등급, 공격 속도, 최대 체력 등 다양한 능력치를 변화시킵니다.
- 적 처치 시 확률적으로 새로운 장비를 획득할 수 있습니다 (보스는 더 좋은 장비 드랍).
- **장비 자동 장착**: 새로운 아이템 획득 시 현재 장착된 아이템보다 좋을 경우 자동으로 적합한 파티원에게 장착하는 토글 기능을 제공합니다 (기본값: 켬).

### 캐릭터 성장
- 전투를 통해 경험치(XP)를 얻어 레벨을 올릴 수 있습니다.
- 레벨업 시 기본 능력치가 상승합니다.

### 파티 공용 업그레이드
- 획득한 골드를 사용하여 모든 파티원에게 적용되는 공격력, 방어력, 체력, 공격 속도 업그레이드를 구매할 수 있습니다.

### 스테이지 진행
- 일반 몬스터를 10번 처치하면 해당 스테이지의 보스가 등장합니다.
- 보스를 처치하면 다음 스테이지로 진행할 수 있습니다.
- 이미 클리어한 이전 스테이지로 돌아갈 수 있는 기능이 제공됩니다. (첫 스테이지 제외)

### 다회차 (New Game Plus - NG+)
- 지정된 최종 스테이지(현재 스테이지 30)의 보스를 클리어하면 NG+를 시작할 수 있습니다.
- NG+에서는 파티 레벨, 골드, 업그레이드, 장비 등 대부분의 요소를 유지한 채 스테이지 1부터 다시 시작합니다.
- NG+ 레벨이 오를수록 적들이 훨씬 강력해지며, 보상도 소폭 증가합니다.

### 자동화 기능
- 전투는 자동으로 진행됩니다.
- 파티 공용 업그레이드, 스테이지 자동 진행, 장비 자동 장착 기능을 켜고 끌 수 있습니다.

### 게임 로그 및 시각 효과
- 모든 전투 상황, 아이템 획득, 시스템 메시지가 게임 로그에 기록됩니다.
- 주사위 굴림과 피해량 수치가 애니메이션으로 표시되어 시각적인 재미를 더합니다.

### 저장 및 불러오기
- 게임 진행 상황은 주기적으로 자동 저장되며, 전투 종료 시에도 자동 저장됩니다.
- 수동 저장 기능도 제공됩니다.

## 🛠 기술 스택

- **Frontend Framework**: React 19.1.0
- **Language**: TypeScript 5.7.2
- **Build Tool**: Vite 6.2.0
- **Styling**: CSS-in-JS (인라인 스타일)
- **State Management**: React Hooks (useState, useEffect, useCallback, useRef)
- **Utilities**: UUID (고유 식별자 생성)

## 🚀 설치 및 실행

### 필수 요구사항
- Node.js (버전 16 이상 권장)
- npm 또는 yarn

### 설치 방법

1. **저장소 클론**
   ```bash
   git clone <repository-url>
   cd Idle_RPG
   ```

2. **의존성 설치**
   ```bash
   npm install
   ```

3. **개발 서버 실행**
   ```bash
   npm run dev
   ```

4. **브라우저에서 확인**
   - 개발 서버가 시작되면 브라우저에서 `http://localhost:5173`으로 접속

### 빌드 및 배포

```bash
# 프로덕션 빌드
npm run build

# 빌드 결과 미리보기
npm run preview
```

## 📁 프로젝트 구조

```
Idle_RPG/
├── components/           # React 컴포넌트들
│   ├── AnimatedDiceRollDisplay.tsx  # 주사위 굴림 애니메이션
│   ├── CharacterPanel.tsx           # 캐릭터 정보 패널
│   ├── EnemyPanel.tsx              # 적 정보 패널
│   ├── EquipmentModal.tsx          # 장비 관리 모달
│   ├── FloatingTextEffect.tsx      # 떠오르는 텍스트 효과
│   ├── GameLog.tsx                 # 게임 로그 컴포넌트
│   ├── Icons.tsx                   # 아이콘 컴포넌트들
│   ├── InventoryPanel.tsx          # 인벤토리 패널
│   └── ProgressBar.tsx             # 진행률 바
├── services/            # 비즈니스 로직 서비스들
│   ├── enemyService.ts             # 적 생성 및 관리
│   └── lootService.ts              # 전리품 생성 및 관리
├── utils/               # 유틸리티 함수들
│   ├── diceRoller.ts               # 주사위 굴림 로직
│   ├── equipmentUtils.ts           # 장비 관련 유틸리티
│   └── formatters.ts               # 숫자 포맷팅 함수
├── App.tsx              # 메인 애플리케이션 컴포넌트
├── constants.ts         # 게임 상수 정의
├── types.ts             # TypeScript 타입 정의
├── index.tsx            # 애플리케이션 진입점
├── index.html           # HTML 템플릿
├── vite.config.ts       # Vite 설정
├── tsconfig.json        # TypeScript 설정
└── package.json         # 프로젝트 의존성 및 스크립트
```

### 주요 파일 설명

- **`App.tsx`**: 게임의 메인 로직과 상태 관리를 담당하는 핵심 컴포넌트
- **`constants.ts`**: 게임 밸런스, 설정값, 초기 데이터 등 모든 상수 정의
- **`types.ts`**: 게임 내 모든 데이터 구조의 TypeScript 타입 정의
- **`services/`**: 게임 로직을 담당하는 서비스 레이어 (적 생성, 전리품 시스템 등)
- **`utils/`**: 재사용 가능한 유틸리티 함수들 (주사위 굴림, 장비 계산 등)
- **`components/`**: UI 컴포넌트들을 기능별로 분리하여 관리

## 🎯 플레이 방법

1. **게임 시작**: 게임은 자동으로 시작되며, 초기 파티원(용사)이 전투를 시작합니다.

2. **파티 관리**:
   - 스테이지를 진행하여 새로운 파티원을 영입하세요.
   - 적에게서 획득한 장비를 확인하고, 파티원에게 적합한 장비를 장착시켜 능력치를 강화하세요.
   - 골드를 모아 파티 공용 업그레이드를 구매하여 파티 전체를 강화하세요.

3. **전투 관전**:
   - 전투는 자동으로 진행됩니다.
   - 게임 로그와 화면 상단의 주사위 굴림 애니메이션을 통해 전투 상황을 파악할 수 있습니다.
   - 캐릭터/적 머리 위로 떠오르는 피해량 텍스트로 전투 결과를 확인하세요.

4. **스테이지 정복**:
   - 스테이지를 진행하며 더 강력한 적들과 보스에 도전하세요.
   - 자동 스테이지 진행 기능을 활용하거나, 보스 처치 후 수동으로 다음 스테이지로 이동할 수 있습니다.
   - 필요에 따라 이전 스테이지로 돌아가 다시 도전할 수도 있습니다.

5. **NG+ 도전**:
   - 현재 회차의 최종 보스를 물리치면, 다음 회차(NG+)에 도전하여 더욱 강력해진 적들과 싸우며 한계를 시험하세요.

## 👨‍💻 개발 가이드

### 코딩 스타일
- **함수 및 주요 로직**: 모든 함수 상단에 목적을 명확히 하는 주석 추가
- **복잡한 로직**: 중요한 단계마다 한국어 주석으로 전후 맥락 설명
- **파일 구조**: 주요 기능별로 폴더를 구분하여 관리
- **네이밍 컨벤션**: 
  - 상수는 대문자와 언더스코어 사용 (예: `MAX_RETRY_COUNT`)
  - Boolean 변수는 `is`, `has`, `can`으로 시작 (예: `isVisible`, `hasPermission`)

### 에러 처리
- 모든 함수에서 예외 상황을 고려한 에러 처리 포함
- 에러 발생 시 로그 기록 및 사용자 친화적인 메시지 제공
- 사용자가 취할 수 있는 다음 조치 안내

### 성능 최적화
- React.memo, useCallback, useMemo 등을 활용한 불필요한 리렌더링 방지
- 게임 루프 최적화를 위한 requestAnimationFrame 활용
- 메모리 누수 방지를 위한 적절한 cleanup 함수 구현

### 상태 관리
- 복잡한 게임 상태는 useRef를 활용하여 성능 최적화
- 게임 데이터는 localStorage를 통한 자동 저장/불러오기 구현
- 상태 변경 시 불변성 유지

## ⚙️ 환경 설정

### 환경 변수 (선택사항)
프로젝트 루트에 `.env.local` 파일을 생성하여 환경 변수를 설정할 수 있습니다:


### 개발 도구 설정
- **TypeScript**: 엄격한 타입 검사를 위해 `strict` 모드 활성화
- **Vite**: 빠른 개발 서버와 HMR(Hot Module Replacement) 지원
- **Path Alias**: `@` 별칭을 통한 절대 경로 import 지원

## 🤝 기여하기

1. **Fork** 이 저장소를 포크합니다.
2. **Branch** 새로운 기능을 위한 브랜치를 생성합니다. (`git checkout -b feature/AmazingFeature`)
3. **Commit** 변경사항을 커밋합니다. (`git commit -m 'Add some AmazingFeature'`)
4. **Push** 브랜치에 푸시합니다. (`git push origin feature/AmazingFeature`)
5. **Pull Request** 풀 리퀘스트를 생성합니다.

### 기여 가이드라인
- 코드 스타일 가이드를 준수해주세요.
- 새로운 기능 추가 시 적절한 주석과 타입 정의를 포함해주세요.
- 버그 수정이나 기능 개선 시 관련 테스트를 함께 제공해주세요.

## 📝 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

---

**즐거운 모험 되시길 바랍니다! 🗡️⚔️🛡️**